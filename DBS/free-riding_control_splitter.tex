%%% Local Variables:
%%% mode: latex
%%% TeX-master: "<none>"
%%% End:

\label{sec:free_riding_control}

The splitter remembers which chunk, of a list of the last $B'$
transmitted chunks, was sent to each peer of the team. Notice that, in
order to remember the chunk that was sent to each peer in each round,
must be hold that $B'\ge N$. \note{See
  \href{https://github.com/P2PSP/simulator/blob/f0c73be1817e7d3b816cc61cd2c8e59b17f9a0e6/src/core/splitter_dbs.py\#L296}{$\text{destination\_of\_chunk}[]$
    in \texttt{splitter\_dbs.py}}.}

Monitor peers (which are trusted) complain to their splitter with a
$[\mathtt{lost}~\text{lost\_chunk\_index}]$ for each lost chunk. The
splitter only considers these type of messages if they come from a
monitor.

If a peer $P_o$ accumulates more than $L^*$ (see
Tab.~\ref{tab:DBS_parameters}) losts in $R$ rounds, $P_o$ is removed
from the splitter's list of peers. All peers do the same, but in this
case they also remove the selfish neighbors from the $\text{forward}$
and $\text{pending}$ tables.

%Notice that $L$ will
%tend to be proportional to the number $M$ of monitors, especially if
%those cases where $P_o$ is a gone peer that was unable to transmit the
%$[\mathtt{goodbye}]$ messages.

\begin{notex}
This last functionality has not been implemented, at least, as it has
been explained here. The forget() thread is controlled by a timer, not
by a counter of rounds.
\end{notex}

%Peers also control that at least one chunk is received from a neighbor
%in each round.\footnote{Peers recognize that a new round has started
%  when a new chunk is received from the splitter.} If happens that a
%peer $P_x$ does not receives a chunk from peer $P_y$ between $D^*$
%consecutive rounds, $P_x$ removes $P_y$ of its forwaring table.

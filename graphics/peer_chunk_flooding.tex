\documentclass{article}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{algorithm}
\usepackage[noend]{algpseudocode}

\begin{document}
\pagestyle{empty}

\newcommand{\send}{\Rightarrow}
\newcommand{\sendto}{\rightarrow}
\algrenewcommand\algorithmicprocedure{\textbf{task}}

\begin{algorithmic}

  \Procedure{$P_k$.Run}{}
  \State \textsc{BufferData}()
  \While{Player.alive}
  \State keep\_the\_buffer\_full()
  \EndWhile
  \State say\_goodbye()
  \EndProcedure
  
  %\Procedure{$P_k$.ChunkFlooding}{}
  %\While{True}
  %\State $\mathtt{message} \gets \mathtt{sender}$
  %\If{$\mathtt{message}$ \textbf{contains a} $\mathtt{chunk}$}
  %\If{$\mathtt{buffer}[x \% B].\mathtt{chunk\_number} \neq x$}
  %\State $\mathtt{buffer}[x \% B] = [x,P_i,\mathtt{chunk}]$
  %\Else
  %\State $[\mathtt{prune}~x] \sendto P_m$
  %\EndIf
  %\Else
  %\Endif

  %\If{$\mathtt{sender}=S$}
  %\Endif
  
  %\State $[x,\mathtt{chunk}] \gets S$ \textbf{or} $[x,P_i,\mathtt{chunk}] \gets P_m$
  %\If{\textbf{received}~$[x,\mathtt{chunk}]$}
  %\ForAll {$P_n \in T^k$}
  %\State $[x,P_k,\mathtt{chunk}] \sendto P_n$
  %\State $\mathtt{debt}[P_n] = \mathtt{debt}[P_n]+1$
  %\EndFor
  %\EndIf
  %\If{\textbf{received}~$[x,P_i,\mathtt{chunk}]$}
  %\If{$P_m \notin T^k$}
  %\State $T^k = T^k \cup P_m$
  %\State $\mathtt{debt}[P_m]=0$
  %\Else
  %\State $\mathtt{debt}[P_m] = \mathtt{debt}[P_m]-1$
  %\EndIf
  %\ForAll{$P_n \in T^k \setminus P_m$}
  %\State $[x,P_i,\mathtt{chunk}] \sendto P_n$
  %\State $\mathtt{debt}[P_m] = \mathtt{debt}[P_m]+1$
  %\EndFor
  %\EndIf
  %\State \textbf{sort} $T^k$ \textbf{ascending by} $\mathtt{debt[]}$
  %\EndWhile
  %\EndProcedure
  
\end{algorithmic}

\algrenewcommand\algorithmicprocedure{\textbf{function}}

\begin{algorithmic}

  \Procedure{$P_k$.BufferData()}{}
  \State \textsc{ProcessNextMessage}()
  \State $\mathtt{chunk\_to\_play} = x$
  \While{$x<\mathtt{chunk\_to\_play}$ \textbf{or} $(x-\mathtt{chunk\_to\_play})<B/2$}
  \State \textsc{ProcessNextMessage}()
  \EndWhile
  \EndProcedure
  
  %\Procedure{$P_k$.ChunkFlooding}{}
  %\While{True}
  %\State $\mathtt{message} \gets \mathtt{sender}$
  %\If{$\mathtt{message}$ \textbf{contains a} $\mathtt{chunk}$}
  %\If{$\mathtt{buffer}[x \% B].\mathtt{chunk\_number} \neq x$}
  %\State $\mathtt{buffer}[x \% B] = [x,P_i,\mathtt{chunk}]$
  %\Else
  %\State $[\mathtt{prune}~x] \sendto P_m$
  %\EndIf
  %\Else
  %\Endif

  %\If{$\mathtt{sender}=S$}
  %\Endif
  
  %\State $[x,\mathtt{chunk}] \gets S$ \textbf{or} $[x,P_i,\mathtt{chunk}] \gets P_m$
  %\If{\textbf{received}~$[x,\mathtt{chunk}]$}
  %\ForAll {$P_n \in T^k$}
  %\State $[x,P_k,\mathtt{chunk}] \sendto P_n$
  %\State $\mathtt{debt}[P_n] = \mathtt{debt}[P_n]+1$
  %\EndFor
  %\EndIf
  %\If{\textbf{received}~$[x,P_i,\mathtt{chunk}]$}
  %\If{$P_m \notin T^k$}
  %\State $T^k = T^k \cup P_m$
  %\State $\mathtt{debt}[P_m]=0$
  %\Else
  %\State $\mathtt{debt}[P_m] = \mathtt{debt}[P_m]-1$
  %\EndIf
  %\ForAll{$P_n \in T^k \setminus P_m$}
  %\State $[x,P_i,\mathtt{chunk}] \sendto P_n$
  %\State $\mathtt{debt}[P_m] = \mathtt{debt}[P_m]+1$
  %\EndFor
  %\EndIf
  %\State \textbf{sort} $T^k$ \textbf{ascending by} $\mathtt{debt[]}$
  %\EndWhile
  %\EndProcedure
  
\end{algorithmic}

\end{document}

